<html><head><link rel="shortcut icon" type="image/png" href="https://cslmodding.info/favicon.png"/><link rel="stylesheet" href="https://cslmodding.info/css/styles.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">

<script>

       function decruft(doc,errs)
       {

         let log = doc.value;
         let lines = log.split("\n");

         for (var i=lines.length-1; i>0; i--)
         {
           let current = lines[i];

           if (current.indexOf("DebugBindings.gen.cpp Line: 51") != -1) // literally log bukkake
           {
             lines.splice(i,2);
           }
           else if (current.startsWith("Fallback handler")) // who cares?
           {
             lines.splice(i,1);
           }
           else if (current.indexOf("(this message is harmless)") != -1) // so why log it?
           {
             lines.splice(i,1);
           }
           else if (current.startsWith("Assembly ")) // rid
           {
             lines.splice(i,2);
           }
           else if (current.startsWith("No source files found:")) // rid
           {
             lines.splice(i,2);
           }
           else if (current.startsWith("(Filename:  Line: ")) // not useful
           {
             if (lines[i+2].startsWith("d3d11: failed"))
             {
               lines.splice(i,4);
             }
             else
             {
               lines.splice(i,2);
             }
           }
           else if (current.endsWith(" [Mods - Internal]")) // shrink it
           {
             let idx1 = current.lastIndexOf("\\") + 1;
             let idx2 = current.indexOf(" [Mods ");
             let what = current.substring(idx1,idx2);

             let where = "?";

             if (current.indexOf("Cities_Skylines\\Files\\Mods") != -1)
             {
               where = "Bundled Mod";
             }
             else if (current.indexOf("Cities_Skylines\\Addons\\Mods") != -1)
             {
               where = "Local Mod";
             }
             else if (current.indexOf("workshop\\content\\255710") != -1)
             {
               where = "Workshop Mod";
             }

             lines[i] = where + ": " + what;
             lines.splice(i+1,1);
           }
           else if (current.endsWith(" [Packer - Internal]")) // shrink it
           {
             let what = current.split("'")[1];
             let idx1 = current.lastIndexOf("\\") + 1;
             let idx2 = current.indexOf(".crp");
             let name = current.substring(idx1,idx2);

             lines[i] = "Asset: '" + what + "' = " + name;
             lines.splice(i+1,1);
           }
         }

         // clear excess blank lines

         let blank = false;

         for (var i=lines.length-1; i>0; i--)
         {
           let current = lines[i];
           if (current.length < 3) {
             if (!blank)
             {
               blank = true;
             }
             else
             {
               lines.splice(i,1);
             }
           }
           else
           {
             blank = false;
           }
         }

         // output decrufted log

         doc.value = lines.join("\n");

         // now split out errors

         let active = false;
         let trace = [];

         for (var i=0; i<lines.length; i++)
         {
           current = lines[i];

           if (current.startsWith("  at ")) {
             if (!active) {
               trace.push(lines[i-1]);
               active = true;
             }
             trace.push(current);
           }
           else if (active)
           {
             active = false;
             trace.push("","----------------------------------","","");
           }
         }

         // output stack traces

         errs.value = trace.join("\n");
       }
    </script>


<style type="text/css">

textarea {
	background-color: #212426;
	padding: 8px;
	border: 0;
	border-radius: 8px;
	resize: vertical;
	font-family: inherit;
	font-size: 16px;
	color: inherit;
	outline: 0;
	margin: 32px 0;
}

button {
	color: #98a7b3;
    text-decoration: none;
    padding: 6px 12px;
    border-radius: 8px;
    border: 0;
    background-color: #212426;
    text-transform: uppercase;
    font-size: 15px;
    outline: 0;
}

button:hover {
	background-color: #2b3033;
}

</style>

</head><body id="top"><div class="menu" id="menu-file"></div><div class="page"><div class="content">







<h2 id="decruft">Output Log Decrufter</h2>
<p>Paste raw output log in the first field, then click decruft.</p>

<form>
<textarea style="height:256px;width:100%;" id="doc"></textarea><br/>
<button type="button" onclick="decruft(document.getElementById('doc'),document.getElementById('errs'))">Decruft</button><br>
<textarea style="height:512px;width:100%;" id="errs"></textarea>
</form> 


</div>
<script>$(function(){$("#menu-file").load("https://cslmodding.info/menu.html");});</script>
<script src='https://cslmodding.info/js/article.js'></script>
<script src='https://cslmodding.info/js/headings.js'></script>
<script src='https://cslmodding.info/js/scroll.js'></script>
<script>document.title = 'Output Log Decrufter - Cities: Skylines Modding & Asset Creation';</script>
</body></html>